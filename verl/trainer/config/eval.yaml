# IGPO Evaluation Configuration
# This is a simplified config for evaluation only, without training parameters.

# ============================================
# Trainer Settings (minimal for evaluation)
# ============================================
trainer:
  nnodes: 1
  n_gpus_per_node: 8

# ============================================
# Data Settings
# ============================================
data:
  val_files: ./data/test.parquet
  prompt_key: prompt
  max_prompt_length: 30767
  batch_size: 32
  truncation: error
  filter_overlong_prompts: true
  return_raw_chat: false
  # OSS settings (optional, only if using OSS)
  oss_access_key_id: ""
  oss_access_key_secret: ""
  oss_endpoint: ""

# ============================================
# Model Settings
# ============================================
model:
  path: Qwen/Qwen2.5-7B-Instruct
  external_lib: null

# ============================================
# Rollout Settings (for generation)
# ============================================
rollout:
  name: vllm
  temperature: 0.0
  top_k: -1
  top_p: 1.0
  prompt_length: 30767
  response_length: 2000
  dtype: bfloat16
  gpu_memory_utilization: 0.6
  tensor_model_parallel_size: 1
  max_num_batched_tokens: 32768
  max_model_len: 32768
  max_num_seqs: 1024
  ignore_eos: false
  enforce_eager: true
  free_cache_engine: true
  load_format: dummy_dtensor
  disable_log_stats: true
  enable_chunked_prefill: true
  do_sample: false
  log_prob_micro_batch_size_per_gpu: 2

# ============================================
# Actor Settings (minimal for rollout)
# ============================================
actor:
  strategy: fsdp
  fsdp_config:
    fsdp_size: -1
    param_offload: true
  ulysses_sequence_parallel_size: 4
  use_remove_padding: true

# ============================================
# Evaluation Specific Settings
# ============================================
eval:
  # Output directory for evaluation results
  output_dir: ./eval_results
  
  # Multi-turn settings
  max_turns: 10
  search_engine: rag  # "rag" or "online_search"
  
  # Tool settings
  codeact_env_disabled: true
  info_gain_type: prob_diff
  
  # Communication path (optional, for online_search mode)
  data_writing_path: null  # Set to OSS path or local path if using tools

# ============================================
# Ray Settings
# ============================================
ray_init:
  num_cpus: null
